<launch>

<!-- tara camera driver -->
  <group ns="stereo">
<!--node name="tara_camera" pkg="tara_camera_driver" type="tara_camera_node" >
 <param name="device_id" type="int" value="1" />
 <param name="width" type="int" value="752" />
 <param name="height" type="int" value="480" />
 <param name="left/camera_info_url" value="file://$(find tara_camera_driver)/calib/calib_left.yml"/>
 <param name="right/camera_info_url" value="file://$(find tara_camera_driver)/calib/calib_right.yml"/>
 <param name="exposure" type="int" value="1000" />
 <param name="brightness" type="int" value="1" />
</node-->
  </group>

<!-- Default folder with maps-->
<arg name="folder" default="/home/bot/data"/>

<!-- Distance Measurement Node -->
  <node pkg="stroll_bearnav" type="odometry_monitor_node" name="odometry_monitor_node"/>

<!-- feature extraction -->
  <node pkg="stroll_bearnav" type="feature_extraction_node" name="feature_extraction_node">
  <remap from="/stereo/left/image_raw" to="/usb_cam/image_raw"/>
  </node>

<!-- mapping node -->
<node pkg="stroll_bearnav" type="mapper_node" name="mapper_node">
  <param name="folder" value="$(arg folder)" />
  <param name="angularSpeed" value="1.0" />
</node>

<!-- map loader node -->
<node pkg="stroll_bearnav" type="map_preprocessor_node" name="map_preprocessor_node">
 <param name="folder" value="$(arg folder)" />
</node>

<!-- navigator node -->
<node pkg="stroll_bearnav" type="navigator_node" name="navigator_node" output="screen">
  <param name="folder" value="$(arg folder)" />
</node>

<!-- action and reconfigure clients to control the system -->
<node pkg="actionlib" type="axclient.py" args="/mapping" name="Action_client_mapper"/>
<node pkg="actionlib" type="axclient.py" args="/navigator" name="Action_client_navigator"/>
<node pkg="actionlib" type="axclient.py" args="/loader" name="Action_client_loader"/>
<node pkg="rqt_reconfigure" type="rqt_reconfigure" name="Reconfigurator"/>

<!-- image view to check video stream-->
<node pkg="image_view" type="image_view" name="Image_viewer">
  <remap from="image" to="/stereo/left/image_raw"/>
  <param name="autosize" value="true" />
</node>

<node pkg="stroll_bearnav" type="gui_setup.sh" name="Configure_gui"/>

</launch>
